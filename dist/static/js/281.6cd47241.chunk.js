"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[281],{515:(t,e,a)=>{a.d(e,{J$:()=>o,m3:()=>s});const n="/api",o={LOGIN:"".concat(n,"/auth/login"),REGISTER:"".concat(n,"/auth/register"),FORGOT_PASSWORD:"".concat(n,"/auth/forgot-password"),RESET_PASSWORD:"".concat(n,"/auth/reset-password"),UPDATE_PROFILE:"".concat(n,"/auth/update-profile")},s={VALIDATE_USER:"".concat(n,"/auth/user"),GET_PROFILE:"".concat(n,"/user/profile"),UPDATE_PROFILE:"".concat(n,"/user/update-profile")};"".concat(n,"/posts"),"".concat(n,"/posts/create"),"".concat(n,"/posts/update"),"".concat(n,"/posts/delete")},281:(t,e,a)=>{a.r(e),a.d(e,{default:()=>l});var n=a(43),o=a(128),s=a(250),c=a(152),r=a(3),i=a(579);const l=()=>{const[t,e]=(0,n.useState)(null),[a,l]=(0,n.useState)(!0),[u,d]=(0,n.useState)(""),p=(0,s.Zp)(),h=(0,r.wA)();(0,n.useEffect)((()=>{(async()=>{try{const t=localStorage.getItem("token");if(!t)return void p("/login");const a=await(0,o.rz)(t);h((0,c.Ne)(a.data)),e(a.data),l(!1)}catch(n){var t,a;h((0,c.ri)()),d((null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Something went wrong"),l(!1),p("/login")}})()}),[p]);return a?(0,i.jsx)("div",{children:"Loading..."}):u?(0,i.jsx)("div",{className:"error-message",children:u}):(0,i.jsxs)("div",{className:"dashboard-container",children:[(0,i.jsxs)("h2",{children:["Welcome, ",(0,i.jsxs)("a",{onClick:()=>{p("/profile")},children:[null===t||void 0===t?void 0:t.name,"!"]})]}),(0,i.jsxs)("p",{children:["Email: ",null===t||void 0===t?void 0:t.email]}),(0,i.jsx)("button",{onClick:()=>{h((0,c.ri)()),localStorage.removeItem("token"),p("/login")},children:"Logout"})]})}},128:(t,e,a)=>{a.d(e,{HH:()=>c,IM:()=>s,Zx:()=>r,i6:()=>i,rz:()=>l});var n=a(722),o=a(515);async function s(t){return n.A.post(o.J$.FORGOT_PASSWORD,{email:t})}async function c(t,e){return n.A.post(o.J$.LOGIN,{email:t,password:e})}async function r(t){return n.A.post(o.J$.REGISTER,t)}async function i(t,e){return n.A.post(o.J$.RESET_PASSWORD,{token:t,password:e})}async function l(t){return n.A.get(o.m3.VALIDATE_USER,{headers:{Authorization:"Bearer ".concat(t)}})}}}]);
//# sourceMappingURL=281.6cd47241.chunk.js.map