"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[794],{515:(e,t,a)=>{a.d(t,{J$:()=>s,m3:()=>o});const n="/api",s={LOGIN:"".concat(n,"/auth/login"),REGISTER:"".concat(n,"/auth/register"),FORGOT_PASSWORD:"".concat(n,"/auth/forgot-password"),RESET_PASSWORD:"".concat(n,"/auth/reset-password"),UPDATE_PROFILE:"".concat(n,"/auth/update-profile")},o={VALIDATE_USER:"".concat(n,"/auth/user"),GET_PROFILE:"".concat(n,"/user/profile"),UPDATE_PROFILE:"".concat(n,"/user/update-profile")};"".concat(n,"/posts"),"".concat(n,"/posts/create"),"".concat(n,"/posts/update"),"".concat(n,"/posts/delete")},794:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var n=a(43),s=a(250),o=a(128),r=a(722),i=a(515);var c=a(579);const l=()=>{const[e,t]=(0,n.useState)(null),[a,l]=(0,n.useState)(!0),[u,d]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[g,v]=(0,n.useState)(""),[S,x]=(0,n.useState)(!1),E=(0,s.Zp)();(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return void E("/login");const a=await(0,o.rz)(e);t(a.data),p(a.data.name),f(a.data.email),v(a.data.profilePicture),l(!1)}catch(n){var e,a;d((null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Something went wrong"),l(!1),E("/login")}})()}),[E]);return a?(0,c.jsx)("div",{children:"Loading..."}):u?(0,c.jsx)("div",{className:"error-message",children:u}):(0,c.jsxs)("div",{className:"profile-container",children:[(0,c.jsx)("h2",{children:"Profile"}),(0,c.jsxs)("div",{className:"profile-picture",children:[(0,c.jsx)("img",{src:g||"https://via.placeholder.com/150",alt:"Profile"}),S&&(0,c.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{v(e.result)},e.readAsDataURL(t)}}})]}),S?(0,c.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),a=await async function(e,t){let{name:a,email:n,profilePicture:s}=t;return r.A.put(i.m3.UPDATE_PROFILE,{name:a,email:n,profilePicture:s},{headers:{Authorization:"Bearer ".concat(e)}})}(e,{name:m,email:h,profilePicture:g});t(a.data),x(!1),d("")}catch(s){var a,n;d((null===(a=s.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||"Something went wrong")}},children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"name",children:"Name"}),(0,c.jsx)("input",{type:"text",name:"name",value:m,onChange:e=>p(e.target.value)})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email"}),(0,c.jsx)("input",{type:"email",name:"email",value:h,onChange:e=>f(e.target.value)})]}),(0,c.jsx)("button",{type:"submit",children:"Save Changes"}),(0,c.jsx)("button",{type:"button",onClick:()=>x(!1),children:"Cancel"})]}):(0,c.jsxs)("div",{className:"profile-info",children:[(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Name:"})," ",null===e||void 0===e?void 0:e.name]}),(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:"Email:"})," ",null===e||void 0===e?void 0:e.email]}),(0,c.jsx)("button",{onClick:()=>x(!0),children:"Edit Profile"})]})]})}},128:(e,t,a)=>{a.d(t,{HH:()=>r,IM:()=>o,Zx:()=>i,i6:()=>c,rz:()=>l});var n=a(722),s=a(515);async function o(e){return n.A.post(s.J$.FORGOT_PASSWORD,{email:e})}async function r(e,t){return n.A.post(s.J$.LOGIN,{email:e,password:t})}async function i(e){return n.A.post(s.J$.REGISTER,e)}async function c(e,t){return n.A.post(s.J$.RESET_PASSWORD,{token:e,password:t})}async function l(e){return n.A.get(s.m3.VALIDATE_USER,{headers:{Authorization:"Bearer ".concat(e)}})}}}]);
//# sourceMappingURL=794.35965404.chunk.js.map